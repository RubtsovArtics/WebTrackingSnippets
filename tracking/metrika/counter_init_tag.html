<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w['yaCounter' + {{YM -- Tracker}}] = new Ya.Metrika({
                    id: Number({{YM -- Tracker}}),
                    clickmap: true,
                    trackLinks: true,
                    accurateTrackBounce: true,
                    triggerEvent: true,
                    webvisor: true,
                    ecommerce: "dataLayer"
                });
                w.goalSender = function(t,p,b){
                    p = typeof p !== 'undefined' ? p : undefined;
                    b = typeof b !== 'undefined' ? b : undefined;
                    if (typeof w['yaCounter' + {{YM -- Tracker}}] == 'object') {
                        if (typeof p == 'object' || typeof p == 'function'){
                            if (typeof b == 'function' || typeof b == 'object'){
                                w['yaCounter' + {{YM -- Tracker}}].reachGoal(t,p,b);
                            } else{
                                w['yaCounter' + {{YM -- Tracker}}].reachGoal(t,p);
                            }
                        } else {
                            if (typeof b == 'function' || typeof b == 'object') {
                                w['yaCounter' + {{YM -- Tracker}}].reachGoal(t,b);
                            } else {
                                w['yaCounter' + {{YM -- Tracker}}].reachGoal(t);
                            }
                        }
                    } else {
                        w.setTimeout(function(){w.goalSender(t,p,b);}, 300);
                    };
                };
                w['document'].addEventListener('yacounter' + {{YM -- Tracker}} + 'inited', function (){
                    dataLayer = w.dataLayer || [];
                    dataLayer.push({
                        'event': 'YMReady',
                        'isYMReady': 'true',
                        'ymclid': w['yaCounter' + {{YM -- Tracker}}].getClientID()
                    });
                });
            } catch(e) { 
                dataLayer = w.dataLayer || [];
                dataLayer.push({
                    'event': 'YMFail',
                    'isYMReady': 'false',
                    'failReason': String(e)
                });
            }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = "https://mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/{{YM -- Tracker}}" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
